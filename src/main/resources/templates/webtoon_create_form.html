<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì›¹íˆ° ë“±ë¡</title>
    <link rel="stylesheet" th:href="@{/CSS/Navber.css}">
    <link rel="stylesheet" href="/webtoon_create_form.css">
</head>
<body>
<div th:replace="~{navbar :: navbar}"></div>
<div class="content_wrap">
<!-- ì‚¬ì´ë“œë°” -->
<div class="sidebar">
    <div class="sidebar-item">
        <!-- ì¼ë°˜ ì‚¬ìš©ìë¥¼ ìœ„í•œ ë§í¬ -->
        <a th:if="${session.loginUser != null}"
           th:href="@{/profile/user/{id}(id=${session.loginUser.id})}"
           class="sidebar-link">
            <span class="sidebar-icon">ğŸ </span> í”„ë¡œí•„ í™ˆ
        </a>

        <!-- íšŒì‚¬ ì‚¬ìš©ìë¥¼ ìœ„í•œ ë§í¬ -->
        <a th:if="${session.loginCompanyUser != null}"
           th:href="@{/profile/company/{id}(id=${session.loginCompanyUser.id})}"
           class="sidebar-link">
            <span class="sidebar-icon">ğŸ¢</span> íšŒì‚¬ í”„ë¡œí•„ í™ˆ
        </a>
    </div>
    <div class="sidebar-item">
        <a th:href="@{/webtoon/create}" class="sidebar-link">
            <span class="sidebar-icon">âœï¸</span> ì‘í’ˆ ë“±ë¡
        </a>
    </div>
    <div class="sidebar-item">
        <a th:href="@{/my/webtoon}" class="sidebar-link">
            <span class="sidebar-icon">ğŸ“‹</span> ì‘í’ˆ ê´€ë¦¬
        </a>
    </div>
    <div class="sidebar-item">
        <a th:href="@{/my/favorite/webtoon}" class="sidebar-link">
            <span class="sidebar-icon">â¤ï¸</span> ê´€ì‹¬ ì‘í’ˆ
        </a>
    </div>
    <div class="sidebar-item">
        <a th:href="@{/message/menu}" class="sidebar-link">
            <span class="sidebar-icon">âœ‰ï¸</span> ìª½ì§€í•¨
        </a>
    </div>
    <div class="sidebar-item">
        <a th:if="${session.loginUser != null}"
           th:href="@{/profile/user/{id}/modify(id=${session.loginUser.id})}" class="sidebar-link">
            <span class="sidebar-icon">ğŸ–Šï¸</span> ì •ë³´ ìˆ˜ì •
        </a>
        <!-- íšŒì‚¬ ì‚¬ìš©ìë¥¼ ìœ„í•œ ë§í¬ -->
        <a th:if="${session.loginCompanyUser != null}"
           th:href="@{/profile/company/{id}(id=${session.loginCompanyUser.id})}" class="sidebar-link">
            <span class="sidebar-icon">ğŸ–Šï¸</span> ì •ë³´ ìˆ˜ì •
        </a>
    </div>
</div>
<div class="image-preview">
    <div class="container">
        <h2>ì›¹íˆ° ë“±ë¡</h2>

        <form action="#" th:action="@{/webtoon/create}" th:object="${webToonForm}" method="post"
              enctype="multipart/form-data" class="create-form">
            <div class="title">
                <label for="title">ì œëª©</label>
                <input type="text" id="title" th:field="*{title}" placeholder="ì›¹íˆ° ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"/>
                <span th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="error">Title Error</span>
            </div>

            <div class="content">
                <label for="content">ë‚´ìš©</label>
                <textarea id="content" th:field="*{content}" placeholder="ì›¹íˆ° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                <span th:if="${#fields.hasErrors('content')}" th:errors="*{content}" class="error">Content Error</span>
            </div>

            <div class="genre">
                <label for="genreTypeId">ì¥ë¥´</label>
                <select id="genreTypeId" th:field="*{genreTypeId}">
                    <option value="" disabled selected>ì¥ë¥´ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    <option th:each="genre : ${genreTypes}" th:value="${genre.id}"
                            th:text="${genre.genreTypename}"></option>
                </select>
                <span th:if="${#fields.hasErrors('genreTypeId')}" th:errors="*{genreTypeId}"
                      class="error">Genre Error</span>
            </div>

            <div class="image-card">
                <label for="thumbnailImg">ì¸ë„¤ì¼ ì´ë¯¸ì§€</label>
                <input type="file" id="thumbnailImg" name="thumbnailImg" accept="image/*"/>
                <span th:if="${#fields.hasErrors('thumbnailImg')}" th:errors="*{thumbnailImg}" class="error">Thumbnail Image Error</span>
            </div>

            <div class="create-btn">
                <button type="submit">ë“±ë¡</button>
            </div>
            <span th:if="${errorMessage}" th:text="${errorMessage}" style="color: red;"></span>
        </form>
    </div>
</div>
<div class="preview">
    <img id="imagePreview" src="" alt="ì¸ë„¤ì¼ ì‚¬ì§„ í¬ê¸°ëŠ” 160x207 ì…ë‹ˆë‹¤"/>
</div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const thumbnailInput = document.getElementById('thumbnailImg');
        const imagePreview = document.getElementById('imagePreview');

        thumbnailInput.addEventListener('change', function () {
            const file = this.files[0];

            if (file) {
                // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ì„¤ì •
                const reader = new FileReader();
                reader.onload = function (e) {
                    imagePreview.src = e.target.result;
                    imagePreview.style.display = 'block'; // ì´ë¯¸ì§€ í‘œì‹œ
                }
                reader.readAsDataURL(file);
            } else {
                // íŒŒì¼ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš°
                fileNameSpan.textContent = '';
                imagePreview.src = '';
                imagePreview.style.display = 'none'; // ì´ë¯¸ì§€ ìˆ¨ê¹€
            }
        });
    });
</script>
</body>
</html>
