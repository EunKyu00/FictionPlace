<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì›¹íˆ° ìˆ˜ì •</title>
    <link rel="stylesheet" th:href="@{/CSS/Navber.css}">
    <link rel="stylesheet" href="/webtoon_modify.css" />
</head>
<body>
<div th:replace="~{navbar :: navbar}"></div>
<div class="content_wrap">
<!-- ì‚¬ì´ë“œë°” -->
<div class="sidebar">
    <div class="sidebar-item">
        <!-- ì¼ë°˜ ì‚¬ìš©ìë¥¼ ìœ„í•œ ë§í¬ -->
        <a th:if="${session.loginUser != null}"
           th:href="@{/profile/user/{id}(id=${session.loginUser.id})}"
           class="sidebar-link">
            <span class="sidebar-icon">ğŸ </span> í”„ë¡œí•„ í™ˆ
        </a>

        <!-- íšŒì‚¬ ì‚¬ìš©ìë¥¼ ìœ„í•œ ë§í¬ -->
        <a th:if="${session.loginCompanyUser != null and session.loginCompanyUser.id != null}"
           th:href="@{/profile/company/{id}(id=${session.loginCompanyUser.id})}"
           class="sidebar-link">
            <span class="sidebar-icon">ğŸ¢</span> íšŒì‚¬ í”„ë¡œí•„ í™ˆ
        </a>
    </div>
    <div class="sidebar-item">
        <a th:href="@{/webtoon/create}" class="sidebar-link">
            <span class="sidebar-icon">âœï¸</span> ì‘í’ˆ ë“±ë¡
        </a>
    </div>
    <div class="sidebar-item">
        <a th:href="@{/my/webtoon}" class="sidebar-link">
            <span class="sidebar-icon">ğŸ“‹</span> ì‘í’ˆ ê´€ë¦¬
        </a>
    </div>
    <div class="sidebar-item">
        <a th:href="@{/my/favorite/webtoon}" class="sidebar-link">
            <span class="sidebar-icon">â¤ï¸</span> ê´€ì‹¬ ì‘í’ˆ
        </a>
    </div>
    <div class="sidebar-item">
        <a th:href="@{/message/menu}" class="sidebar-link">
            <span class="sidebar-icon">âœ‰ï¸</span> ìª½ì§€í•¨
        </a>
    </div>
    <div class="sidebar-item">
        <a th:if="${session.loginUser != null}"
           th:href="@{/profile/user/{id}/modify(id=${session.loginUser.id})}" class="sidebar-link">
            <span class="sidebar-icon">ğŸ–Šï¸</span> ì •ë³´ ìˆ˜ì •
        </a>
        <!-- íšŒì‚¬ ì‚¬ìš©ìë¥¼ ìœ„í•œ ë§í¬ -->
        <a th:if="${session.loginCompanyUser != null and session.loginCompanyUser.id != null}"
           th:href="@{/profile/company/{id}(id=${session.loginCompanyUser.id})}" class="sidebar-link">
            <span class="sidebar-icon">ğŸ–Šï¸</span> ì •ë³´ ìˆ˜ì •
        </a>
    </div>
</div>
<form th:action="@{/webtoon/modify/{id}(id=${webtoon.id})}" method="post" enctype="multipart/form-data">
    <!-- ì›¹íˆ° ì œëª© -->
    <div class="form-group">
        <label for="title">ì›¹íˆ° ì œëª©</label>
        <input type="text" id="title" name="title" required="required" placeholder="ì›¹íˆ° ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"
               class="form-control" th:value="${webtoon.title}">
    </div>

    <!-- ì›¹íˆ° ë‚´ìš© -->
    <div class="form-group">
        <label for="content">ì›¹íˆ° ë‚´ìš©</label>
        <textarea id="content" name="content" required="required" placeholder="ì›¹íˆ° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
                  class="form-control" rows="6" th:text="${webtoon.content}"></textarea>
    </div>

    <!-- ì¥ë¥´ ì„ íƒ -->
    <div>
        <label for="genreTypeId">ì¥ë¥´:</label>
        <select id="genreTypeId" name="genreTypeId" class="form-control">
            <option value="" disabled>ì¥ë¥´ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
            <option th:each="genre : ${genreTypes}"
                    th:value="${genre.id}"
                    th:text="${genre.genreTypename}"
                    th:selected="${genre.id == webtoon.genreType.id}"></option>
        </select>
    </div>

    <!-- ì¸ë„¤ì¼ ì—…ë¡œë“œ -->
    <div class="form-group">
        <label for="thumbnailImg"></label>
        <input type="file" id="thumbnailImg" name="thumbnailImg" accept="image/*" class="form-control"
               onchange="previewThumbnail()" />
        <small>ì¸ë„¤ì¼ ì´ë¯¸ì§€ëŠ” 1ì¥ë§Œ ì„ íƒí•˜ì„¸ìš”.</small>
    </div>

    <div class="thumbnail-container" id="thumbnailPreview">
        <img th:src="@{${webtoon.thumbnailImg}}" alt="Thumbnail Preview" id="currentThumbnail" style="max-width:150px; max-height:150px;" />
        <input type="hidden" name="existingThumbnailUrl" th:value="${webtoon.thumbnailImg}" />
    </div>

    <!-- ìˆ˜ì • ë²„íŠ¼ -->
    <button type="submit" class="btn">ìˆ˜ì •</button>
</form>
</div>
<script>
    // ì¸ë„¤ì¼ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° í•¨ìˆ˜
    function previewThumbnail() {
        var file = document.getElementById("thumbnailImg").files[0];
        var reader = new FileReader();
        reader.onload = function (e) {
            document.getElementById("currentThumbnail").src = e.target.result;
        };
        reader.readAsDataURL(file);
    }
</script>
</body>
</html>
