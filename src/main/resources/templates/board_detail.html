<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Í≤åÏãúÍ∏Ä ÏÉÅÏÑ∏</title>
    <link rel="stylesheet" href="/board_detail.css">
    <link rel="stylesheet" th:href="@{/CSS/Navber.css}">
</head>
<body>
<div th:replace="~{navbar :: navbar}"></div>


    <div class="content-wrapper">
        <div class="post-details">
            <h1 th:text="${board.title}"></h1>
            <div class="details">
                <span class="details-info">
                <span class="nickname" th:text="'üë§' + ${board.siteUser != null ? board.siteUser.nickname : board.companyUser.companyName}"></span>
                <span class="category" th:text="'üìÇ' + ${board.boardType.boardTypeName}"></span>
                <span class="comments" th:text="'üí¨' + ${comment_count}"></span>
                <span class="views" th:text="'üëÄ' + ${board.hit}"></span>
                <span class="likes" th:text="'üëç' + ${board.likes}"></span>
                </span>
                <!-- Î°úÍ∑∏Ïù∏Îêú ÏÇ¨Ïö©Ïûê(ÏùºÎ∞ò/Í∏∞ÏóÖ)ÏôÄ ÏûëÏÑ±Ïûê ÎπÑÍµê -->
                <div  class="post-btn" th:if="(${loginUser != null and board.siteUser != null and loginUser.id == board.siteUser.id})
                or (${loginCompanyUser != null and board.companyUser != null and loginCompanyUser.id == board.companyUser.id})">
                    <a th:href="@{|/board/modify/${board.id}|}">ÏàòÏ†ï</a>
                    <a th:href="@{|/board/delete/${board.id}|}" onclick="return confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">ÏÇ≠Ï†ú</a>
                </div>
            </div>
        </div>

        <div class="post-content">
            <p th:text="${board.content}"></p>
            <div class="vote">
                <span>
                    <div class="post-edit">
                    <form th:action="@{|/board/${board.id}/recommend|}" method="POST">
                        <button type="submit" class="btn-recommend">üëç</button>
                    </form>
                <span th:text="${board.likes}"></span></span>
            </div>
                <!-- Î°úÍ∑∏Ïù∏ÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞, ÏóêÎü¨ Î©îÏãúÏßÄ Ï∂úÎ†• -->
                <div th:if="${errorMessage}" style="color: red; margin-bottom: 20px;">
                    <p th:text="${errorMessage}"></p>
                </div>

            </div>
        </div>

        <div class="comments-section">
            <h2>üí¨ ÎåìÍ∏Ä</h2>
            <!-- ÎåìÍ∏Ä ÏûÖÎ†• Ìèº -->
            <div class="comment-form">
                <form th:action="@{|/comment/create/${board.id}|}" method="post">
                    <!-- Î°úÍ∑∏Ïù∏ÎêòÏßÄ ÏïäÏïòÏùÑ Îïå ÎåìÍ∏Ä Îì±Î°ùÏãú ÏóêÎü¨ Î©îÏãúÏßÄ Ï∂úÎ†• -->
                    <div th:if="${message}" style="color: red !important; margin-bottom: 20px;">
                        <p th:text="${message}"></p>
                    </div>
                    <!-- ÎπàÎ¨∏ÏûêÏó¥,Í≥µÎ∞± ÎåìÍ∏Ä Îì±Î°ùÏãú ÏóêÎü¨ Î©îÏãúÏßÄ Ï∂úÎ†• -->
                    <div th:if="${errorContent}" style="color: red !important; margin-bottom: 20px;">
                        <p th:text="${errorContent}"></p>
                    </div>
                    <textarea name="content" id="content" rows="4" placeholder="ÎåìÍ∏ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..."></textarea>
                    <button type="submit" class="btn-submit">ÎåìÍ∏ÄÎì±Î°ù</button>
                </form>
            </div>

            <div th:each="comment : ${comments}" class="comment">
                <div class="comment-info">
                    <span class="author"
                          th:text="'üë§' + ${comment.siteUser != null ? comment.siteUser.nickname : comment.companyUser.companyName}">
                        <!-- Ïòà: üë§ ÎãâÎÑ§ÏûÑ ÎòêÎäî Í∏∞ÏóÖÎ™Ö -->
                    </span>
                                <span class="time" th:text="${#temporals.format(comment.createdDate, 'yyyy-MM-dd HH:mm')}">
                        <!-- ÏûëÏÑ± ÏãúÍ∞Ñ (Ïòà: 2023-01-01 12:34) -->
                    </span>
                    <p th:text="${comment.content}"></p>
                </div>
                <div class="delite">
                    <div th:if="${loginUser != null && comment.siteUser?.id == loginUser?.id || loginCompanyUser != null && comment.companyUser?.id == loginCompanyUser?.id}"
                         class="comment-delete">
                        <a th:href="@{|/comment/delete/${comment.id}|}" class="btn-delete">x</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

<script src="/JS/dropdown.js"></script>
</body>
</html>
